<!DOCTYPE html>
<html lang="ca">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MarcBook · L'Univers d'Aprenentatge</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root {
    --primary: #6366f1;
    --bg-body: #f3f4f6;
    --bg-card: #ffffff;
    --text-main: #1f2937;
    --text-light: #6b7280;
    --gradient-hero: linear-gradient(135deg, #4f46e5 0%, #9333ea 100%);
}

* { box-sizing: border-box; transition: all 0.3s ease; }
body { margin:0; font-family:'Poppins', sans-serif; background: var(--bg-body); color: var(--text-main); overflow-x:hidden; }

/* --- HERO --- */
.hero {
    background: var(--gradient-hero);
    color:white; text-align:center;
    padding:4rem 2rem 6rem;
    border-bottom-left-radius:50px;
    border-bottom-right-radius:50px;
    box-shadow:0 10px 30px rgba(79,70,229,0.3);
}
.hero-avatar-container { position:relative; width:140px; height:140px; margin:0 auto 1.5rem; }
.hero-avatar { width:100%; height:100%; border-radius:50%; border:4px solid rgba(255,255,255,0.3); object-fit:cover; }

/* --- CONTROLS --- */
.controls-container { max-width:1000px; margin:-30px auto 2rem; padding:0 1rem; position:relative; z-index:10; }
.search-bar { background:white; padding:0.8rem 1.5rem; border-radius:50px; box-shadow:0 4px 15px rgba(0,0,0,0.05); display:flex; align-items:center; margin-bottom: 1rem; }
.search-bar input { border:none; outline:none; width:100%; margin-left:10px; font-size:1rem; }
.filter-buttons { display:flex; justify-content:center; flex-wrap:wrap; gap:0.5rem; }
.btn-filter { background:white; border:none; padding:0.6rem 1.2rem; border-radius:20px; font-weight:600; color:var(--text-light); cursor:pointer; box-shadow:0 2px 5px rgba(0,0,0,0.05); }
.btn-filter.active { background:var(--primary); color:white; }

/* --- ESTRUCTURA DE CONTINGUT --- */
.main-container { max-width: 1240px; margin: 0 auto; padding: 0 1.5rem 4rem; }

/* Títol de la Unitat Temàtica */
.ut-title { 
    font-family: 'Nunito', sans-serif; font-size: 1.5rem; font-weight: 800; 
    margin: 2rem 0 1rem; color: var(--primary); display: none; 
}

/* Fila horitzontal amb scroll */
.ut-row-wrapper {
    display: flex;
    overflow-x: auto;
    gap: 1.5rem;
    padding: 0.5rem 0.5rem 1.5rem;
    margin-bottom: 1rem;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) transparent;
}

.ut-row-wrapper::-webkit-scrollbar { height: 8px; }
.ut-row-wrapper::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
.ut-row-wrapper::-webkit-scrollbar-thumb:hover { background: var(--primary); }

/* Grid per a "Tots" i "Projectes" */
.grid-mode .ut-row-wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    overflow-x: visible;
}
.grid-mode .ut-title { display: none !important; }

/* --- TARGETES --- */
.artifact-card {
    background: var(--bg-card);
    border-radius: 20px;
    width: 280px;
    height: 440px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 6px rgba(0,0,0,0.04);
    overflow: hidden;
}
.artifact-card.hidden { display: none !important; }

.card-header { height: 120px; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; position: relative; }
.header-bio { background: linear-gradient(135deg,#10b981,#059669); }
.header-fis { background: linear-gradient(135deg,#f59e0b,#d97706); }
.header-proj { background: linear-gradient(135deg,#ec4899,#db2777); }

.course-badge { background: var(--bg-body); padding: 2px 8px; border-radius: 6px; font-size: 0.7rem; font-weight: 700; color: var(--text-light); margin-bottom: 0.5rem; width: fit-content; }
.card-body { padding: 1.2rem; display: flex; flex-direction: column; flex-grow: 1; }
.card-title { font-size: 1.1rem; font-weight: 800; margin: 0; }
.card-desc { font-size: 0.85rem; color: var(--text-light); flex-grow: 1; margin: 0.5rem 0; }
.btn-launch { display:flex; align-items:center; justify-content:center; width:100%; padding:0.6rem; border-radius:12px; background:var(--bg-body); color:var(--text-main); text-decoration:none; font-weight:600; font-size: 0.9rem; }
.btn-launch:hover { background: var(--primary); color:white; }

.fade-in { animation: fadeIn 0.4s ease-out; }
@keyframes fadeIn { from { opacity:0; transform: translateY(10px); } to { opacity:1; transform: translateY(0); } }

</style>
</head>
<body class="grid-mode">

<header class="hero">
    <div class="hero-avatar-container">
        <img src="https://i.ibb.co/Df2w2zm2/Marc.png" alt="Marc" class="hero-avatar">
    </div>
    <h1 style="font-family:'Nunito'; font-size:3rem; margin:0;">MarcBook</h1>
    <p>Simulacions i eines per a l'aula de ciències.</p>
</header>

<div class="controls-container">
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Cerca per tema o UT...">
    </div>
    <div class="filter-buttons">
        <button class="btn-filter active" onclick="filterApps('all', event)">Tots</button>
        <button class="btn-filter" onclick="filterApps('1eso', event)">1r curs</button>
        <button class="btn-filter" onclick="filterApps('2eso', event)">2n curs</button>
        <button class="btn-filter" onclick="filterApps('3eso', event)">3r curs</button>
        <button class="btn-filter" onclick="filterApps('4eso', event)">4t curs</button>
        <button class="btn-filter" onclick="filterApps('projectes', event)">Projecte Integrador</button>
    </div>
</div>

<main class="main-container" id="mainContent">
    <h3 class="ut-title" data-ut-group="2.2">Unitat Temàtica 2.2: Nutrició</h3>
    <div class="ut-row-wrapper" data-ut-group="2.2">
        <div class="artifact-card fade-in" data-category="2eso" data-ut="2.2" data-tags="nutricio">
            <div class="card-header header-bio"><i class="fas fa-apple-alt"></i></div>
            <div class="card-body">
                <span class="course-badge">2n curs · UT 2.2</span>
                <h3 class="card-title">Cròniques dels Nutrients</h3>
                <p class="card-desc">El viatge dels aliments pel sistema digestiu.</p>
                <a href="javascript:void(0)" class="btn-launch">Obrir</a>
            </div>
        </div>
        </div>

    <h3 class="ut-title" data-ut-group="4.2">Unitat Temàtica 4.2: Forces</h3>
    <div class="ut-row-wrapper" data-ut-group="4.2">
        <div class="artifact-card fade-in" data-category="4eso" data-ut="4.2" data-tags="forces">
            <div class="card-header header-fis"><i class="fas fa-dumbbell"></i></div>
            <div class="card-body">
                <span class="course-badge">4t curs · UT 4.2</span>
                <h3 class="card-title">Laboratori Newton</h3>
                <p class="card-desc">Simulació de les lleis de la dinàmica.</p>
                <a href="javascript:void(0)" class="btn-launch">Obrir</a>
            </div>
        </div>
    </div>

    <h3 class="ut-title" data-ut-group="general">Altres Recursos</h3>
    <div class="ut-row-wrapper" data-ut-group="general">
        <div class="artifact-card fade-in" data-category="1eso" data-ut="1.1" data-tags="roques">
            <div class="card-header header-bio"><i class="fas fa-mountain"></i></div>
            <div class="card-body">
                <span class="course-badge">1r curs</span>
                <h3 class="card-title">Cicle de les Roques</h3>
                <p class="card-desc">Transformació geològica interactiva.</p>
                <a href="javascript:void(0)" class="btn-launch">Obrir</a>
            </div>
        </div>

        <div class="artifact-card fade-in" data-category="projectes" data-tags="pi">
            <div class="card-header header-proj"><i class="fas fa-tasks"></i></div>
            <div class="card-body">
                <span class="course-badge">Projecte Integrador</span>
                <h3 class="card-title">Planificador de PI</h3>
                <p class="card-desc">Eina de seguiment per a l'alumnat.</p>
                <a href="javascript:void(0)" class="btn-launch">Obrir</a>
            </div>
        </div>
    </div>
</main>

<script>
function filterApps(category, event) {
    if (event) event.preventDefault();
    
    const body = document.body;
    const buttons = document.querySelectorAll('.btn-filter');
    const cards = document.querySelectorAll('.artifact-card');
    const wrappers = document.querySelectorAll('.ut-row-wrapper');
    const titles = document.querySelectorAll('.ut-title');

    // 1. Gestionar botons actius
    buttons.forEach(btn => btn.classList.remove('active'));
    if (event) event.currentTarget.classList.add('active');

    // 2. Canviar mode de visualització (Grid per a "Tots" i "Projectes", Files per a la resta)
    if (category === 'all' || category === 'projectes') {
        body.classList.add('grid-mode');
    } else {
        body.classList.remove('grid-mode');
    }

    // 3. Filtrar targetes
    cards.forEach(card => {
        if (category === 'all' || card.getAttribute('data-category') === category) {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
        }
    });

    // 4. Gestionar visibilitat de files i títols UT
    wrappers.forEach(wrapper => {
        const hasVisibleCards = Array.from(wrapper.querySelectorAll('.artifact-card')).some(c => !c.classList.contains('hidden'));
        const groupID = wrapper.getAttribute('data-ut-group');
        const title = document.querySelector(`.ut-title[data-ut-group="${groupID}"]`);

        if (hasVisibleCards) {
            wrapper.style.display = (body.classList.contains('grid-mode')) ? 'grid' : 'flex';
            if (title && !body.classList.contains('grid-mode')) title.style.display = 'block';
        } else {
            wrapper.style.display = 'none';
            if (title) title.style.display = 'none';
        }
    });
}

// Cerca en temps real
document.getElementById('searchInput').addEventListener('input', function(e) {
    const term = e.target.value.toLowerCase();
    const cards = document.querySelectorAll('.artifact-card');
    
    cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        const ut = card.getAttribute('data-ut') || '';
        if (text.includes(term) || ut.includes(term)) {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
        }
    });
    // Re-executar la lògica de visibilitat de files
    const activeCategory = document.querySelector('.btn-filter.active').getAttribute('onclick').match(/'([^']+)'/)[1];
    filterApps(activeCategory);
});
</script>
</body>
</html>
